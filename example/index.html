<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>smarthomeh5</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <script>
      (function () {
        const baseFontSize = 100;
        const baseWidth = 375;
        const set = function () {
          const clientWidth =
            document.documentElement.clientWidth || window.innerWidth;
          var rem = 100;
          if (clientWidth !== baseWidth) {
            rem = Math.floor((clientWidth / baseWidth) * baseFontSize);
          }
          document.querySelector("html").style.fontSize = rem + "px";
        };
        set();
        window.addEventListener("resize", set);
      })();
    </script>
    <style type="text/css">
      body {
        margin: 0 auto;
        font-size: 14px;
        min-width: 320px;
        background: #f0f0f0;
        font-size: 14px;
        font-family: Helvetica, STHeiti STXihei, Microsoft YaHei, Arial;
        color: #333;
        -webkit-text-size-adjust: 100% !important;
        -webkit-user-select: none;
        user-select: none;
        height: 100%;
      }
      a,
      button,
      input,
      i,
      div {
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
        -moz-tap-highlight-color: rgba(0, 0, 0, 0);
        -ms-tap-highlight-color: rgba(0, 0, 0, 0);
        tap-highlight-color: rgba(0, 0, 0, 0);
        padding: 0;
        margin: 0;
        font-weight: normal;
      }
    </style>
  </head>
  <body>
    <div id="app"></div>
    <!--<script src="https://static.360buyimg.com/smart/jdsmart-1.0.3.js"></script>-->
    <script>
      ;(function() {

        if (window.JDSMART) { return }

        var JSBridge;
        var readyCallback;
        function init(config) {
          JSBridge = config.bridge;
          JSBridge.init(function(msg,callback){
          });
          readyCallback();
        }

        function ready(fn) {
          readyCallback = fn;
        }

        var fn = {
          getSnapshot:function(successCallback,failedCallback){
            JSBridge.send({type:'getSnapshot'},function(result){

              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getSnapshotByMode:function(mode,successCallback,failedCallback){
            JSBridge.send({type:'getSnapshot',data:mode},function(result){

              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getUserId:function(successCallback,failedCallback){
            JSBridge.send({type:'getUserId'},function(result){

              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getWifiHistory:function(params,successCallback,failedCallback){
            JSBridge.send({type:'getWifiHistory',data:params},function(result){

              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          initDeviceData:function(successCallback){
            JSBridge.send({type:'initDeviceData'},function(result){
              successCallback(result);
            });
          },
          controlDevice:function(params, successCallback,failedCallback){
            JSBridge.send({type:'controlDevice', data:params["command"]},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getHistory:function(successCallback){
            JSBridge.send({type:'history'},function(result){
              successCallback(result);
            });
          },
          getDeviceHistoryData:function(params,successCallback,failedCallback){
            JSBridge.send({type:'getDeviceHistoryData',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getKeyUsers:function(params,successCallback,failedCallback){
            JSBridge.send({type:'getKeyUsers',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getIftttInfoByDeviceInfo:function(params,successCallback,failedCallback){
            JSBridge.send({type:'getIftttInfoByDeviceInfo',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          cleanDeviceHistoryData:function(params,successCallback,failedCallback){
            JSBridge.send({type:'cleanDeviceHistoryData',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          writeAliasOfKey:function(params,successCallback,failedCallback){
            JSBridge.send({type:'writeAliasOfKey',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          unbindKeys:function(params,successCallback,failedCallback){
            JSBridge.send({type:'unbindKeys',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getSmartLockRecords:function(params,successCallback,failedCallback){
            JSBridge.send({type:'getSmartLockRecords',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          deleteSmartLockRecords:function(params,successCallback,failedCallback){
            JSBridge.send({type:'deleteSmartLockRecords',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          clearKeysHistory:function(params,successCallback,failedCallback){
            JSBridge.send({type:'clearKeysHistory',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getRecipeList:function(params, successCallback,failedCallback){
            JSBridge.send({type:'getRecipeList', data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getRecipeDetail:function(params, successCallback,failedCallback){
            JSBridge.send({type:'getRecipeDetail', data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          excuteRecipe:function(params, successCallback,failedCallback){
            JSBridge.send({type:'excuteRecipe', data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getCurrentRecipe:function(params, successCallback,failedCallback){
            JSBridge.send({type:'getCurrentRecipe', data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          }


        };

        var app = {
          getNetworkType:function(successCallback){
            JSBridge.send({type:'getNetworkType'},function(result){
              successCallback(result);
            });
          },
          getWifiSSIDList:function(successCallback,failedCallback){
            JSBridge.send({type:'getWifiSSIDList'},function(result){
             successCallback(result);
            });
          },
          openUrl:function(url){
            JSBridge.send({type:'openUrl', url:url});
          },
          config:function(data){
            JSBridge.send({type:'config',data:data});
          },
          addSubDevice:function(data){
            JSBridge.send({type:'addSubDevice',data:data});
          },
          jumpSubDevice:function(data){
            JSBridge.send({type:'jumpSubDevice',data:data});
          },
          jumpNativePage:function(data){
            JSBridge.send({type:'jumpNativePage',data:data});
          },
          alert:function(data,successCallback){
            JSBridge.callHandler('showAlertView', data, function(response) {
              successCallback(response);
            });
          },
          toast:function(data,successCallback){
            JSBridge.callHandler('messageToast', data, function(response) {
              successCallback(response);
            });
          },
          loading:function(show){
            JSBridge.send({type:'loading', show:show});
          },
          scanQrResult: function(data,successCallback) {
            JSBridge.send({type:'scanQrResult'},function(result){
             successCallback(result);
            });
          },
          renameDevice: function(params, successCallback) {
            JSBridge.send({type:'renameDevice', data: params}, function(result){
             successCallback(result);
            });
          },
        };

        var util = {
          get:function(url,callBack){
            JSBridge.send({type:'get',url:url},function(result){
              callBack(result);
            });
          },

          post:function(url,params,callBack){
            JSBridge.send({type:'post',url:url, data:params},function(result){
              callBack(result);
            });
          },
          configActionBar:function(params){
            JSBridge.send({type:'configActionBar',data:params},function(result){

            });
          },
          closeWindow:function(){
            JSBridge.send({type:'closeWindow'},function(result){

            });
          },
          getToken:function(appkey,callBack){
            JSBridge.send({type:'token',data:appkey},function(result){
              callBack(result);
            });
          }
        };

        var ble = {
          queryBleSnapshot:function(params,successCallback,failedCallback){
            JSBridge.send({type:'queryBleSnapshot',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          sendDataToBle:function(params,successCallback,failedCallback){
            JSBridge.send({type:'sendDataToBle',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          localBleControl:function(params,successCallback,failedCallback){
            JSBridge.send({type:'localBleControl',data:params["command"]},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getBleControl:function(params,successCallback,failedCallback){
            JSBridge.send({type:'getBleControl ',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          getBleHistory:function(params,successCallback,failedCallback){
            JSBridge.send({type:'getBleHistory',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          },
          deleteBleHistory:function(params,successCallback,failedCallback){
            JSBridge.send({type:'deleteBleHistory',data:params},function(result){
              if (result.status != 0) {
                if (failedCallback)
                  failedCallback(result.error);
              } else {
                successCallback(result.result);
              }
            });
          }
        };

        window.JDSMART = {
          init: init,
          ready:ready,
          io:fn,
          app:app,
          util:util,
          ble:ble
        }

        document.addEventListener('JDSmartBridgeReady', function onReady(ev) {
          JDSMART.init({'bridge':ev.bridge});
        });
      })();
    </script>
    <!-- built files will be auto injected -->
    <!--<script  src="https://storage.jd.com/testsmartcloud/jdsmart-2.0.2-core.js"></script>-->
  </body>
</html>
